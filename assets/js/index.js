// Generated by CoffeeScript 1.6.2
(function() {
  require(['jquery', 'marked', 'rainbow', 'rainbow-generic', 'rainbow-php', 'scrollspy', 'affix'], function($, marked) {
    var method, namespacedMethod, page, parse, title, typeClass, _i, _j, _len, _len1, _ref, _ref1;

    parse = function(file) {
      file = marked.lexer(file);
      file = marked.parser(file);
      return file;
    };
    $('.nav-stacked').affix({
      'offset': 50
    });
    $.get('./underscore/README.md', function(file) {
      $('#readme').hide().html(parse(file)).fadeIn();
      return $('body').scrollspy({
        'offset': 50
      });
    });
    _ref = ['Arrays', 'Number', 'Object', 'String', 'Functions', 'Parse', 'Repository'];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      page = _ref[_i];
      $.ajax({
        type: 'GET',
        async: false,
        url: "./docs/" + page + ".md",
        success: function(file) {
          var article;

          file = parse(file);
          article = $('#' + page).hide().html("<h1>" + page + "</h1>" + file).fadeIn();
          $('pre code', article).addClass('lang-php');
          return $('ul', article).addClass('list-unstyled').find('ul').addClass('breadcrumb');
        }
      });
    }
    _ref1 = $('a[name]');
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      title = _ref1[_j];
      method = $(title).attr('name');
      typeClass = $(title).parents('article').attr('id');
      namespacedMethod = typeClass + '-' + method;
      $('a[href=#' + method + ']').attr('href', '#' + namespacedMethod);
      $(title).attr('name', namespacedMethod).attr('id', namespacedMethod);
      $('.' + typeClass).append("<li><a href='#" + namespacedMethod + "'>" + method + "</a></li>");
    }
    return $('.nav-stacked > li').on('activate', function(li) {
      li = $(li.target);
      if (li.has('.nav-sub').length || li.text() === 'Introduction') {
        $('.nav-sub').hide();
        return $('.nav-sub', li).slideDown();
      } else {
        return li.parent().parent().addClass('active');
      }
    });
  });

}).call(this);
